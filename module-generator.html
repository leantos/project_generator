<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module Generator - Enterprise Module Creation Wizard</title>
    <link rel="icon" type="image/png" href="images/xos-md.png">
    <link href="https://fonts.googleapis.com/css2?family=Google+Sans:wght@400;500&family=Roboto:wght@300;400;500&family=Roboto+Mono&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link rel="stylesheet" href="css/module-generator.css">
</head>
<body>
    <div class="wizard-container">
        <div class="sidebar">
            <div class="logo">
                <div class="logo-icon">MG</div>
                <div class="logo-text">Module Generator</div>
            </div>
            <ul class="step-list">
                <li class="step-item active" data-step="1">
                    <div class="step-number">1</div>
                    <div class="step-text">Module Type</div>
                </li>
                <li class="step-item" data-step="2">
                    <div class="step-number">2</div>
                    <div class="step-text">Basic Information</div>
                </li>
                <li class="step-item" data-step="3">
                    <div class="step-number">3</div>
                    <div class="step-text">Entity & Fields</div>
                </li>
                <li class="step-item" data-step="4">
                    <div class="step-number">4</div>
                    <div class="step-text">API Configuration</div>
                </li>
                <li class="step-item" data-step="5">
                    <div class="step-number">5</div>
                    <div class="step-text">Generate</div>
                </li>
            </ul>
            <a href="index.html" class="home-link">
                <span class="material-icons">home</span>
                <span class="home-link-text">Back to Home</span>
            </a>
        </div>

        <div class="main-content">
            <!-- Step 1: Module Type -->
            <div class="step-content active" id="step-1">
                <h1>Choose Module Type</h1>
                <p class="step-description">Select what type of module you want to create. This will determine which components are generated.</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 20%"></div>
                </div>

                <div class="module-type-selector">
                    <div class="module-type-card selected" data-type="fullstack" onclick="selectModuleType('fullstack')">
                        <div class="module-type-icon">üöÄ</div>
                        <div class="module-type-name">Full Stack</div>
                        <div class="module-type-desc">Complete module with frontend and backend</div>
                    </div>
                    <div class="module-type-card" data-type="frontend" onclick="selectModuleType('frontend')">
                        <div class="module-type-icon">üé®</div>
                        <div class="module-type-name">Frontend Only</div>
                        <div class="module-type-desc">React components with XOS framework</div>
                    </div>
                    <div class="module-type-card" data-type="backend" onclick="selectModuleType('backend')">
                        <div class="module-type-icon">‚ö°</div>
                        <div class="module-type-name">Backend Only</div>
                        <div class="module-type-desc">API controllers, services, and domain models</div>
                    </div>
                </div>
            </div>

            <!-- Step 2: Basic Information -->
            <div class="step-content" id="step-2">
                <h1>Module Information</h1>
                <p class="step-description">Enter basic information about your module.</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 40%"></div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">Module Details</div>
                    <div class="form-group">
                        <label>Module Name <span class="required">*</span></label>
                        <input type="text" id="module-name" placeholder="e.g., UserManagement, ProductCatalog">
                        <div class="hint">Use PascalCase. This will be used for class names and filenames</div>
                    </div>
                    <div class="form-group">
                        <label>Module Code</label>
                        <input type="text" id="module-code" placeholder="e.g., USRM, PRDM">
                        <div class="hint">Short identifier for the module (usually 4 characters)</div>
                    </div>
                    <div class="form-group">
                        <label>Description</label>
                        <textarea id="module-description" placeholder="Brief description of what this module does"></textarea>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">Configuration</div>
                    <div class="form-group">
                        <div style="background: #303134; padding: 16px; border-radius: 8px; border-left: 4px solid #8ab4f8;">
                            <div style="color: #8ab4f8; font-weight: 500; margin-bottom: 8px;">üì¶ Namespace Configuration</div>
                            <div style="color: #e8eaed; font-size: 14px;">
                                The namespace will be automatically inherited from your project seed file (projectname_*.md).
                            </div>
                            <div style="color: #9aa0a6; font-size: 12px; margin-top: 4px;">
                                Example: If your project uses "CVS", this module will use "CVS.Transaction.Services"
                            </div>
                        </div>
                    </div>
                    <div class="form-group" id="ui-template-group">
                        <label>UI Design Approach <span class="required">*</span></label>
                        <div class="ui-approach-selector">
                            <div class="approach-option" onclick="selectUIApproach('template')">
                                <input type="radio" name="ui-approach" value="template" checked>
                                <div class="approach-content">
                                    <strong>Use Existing Template</strong>
                                    <p>Choose from proven UI templates</p>
                                </div>
                            </div>
                            <div class="approach-option" onclick="selectUIApproach('wireframe')">
                                <input type="radio" name="ui-approach" value="wireframe">
                                <div class="approach-content">
                                    <strong>Upload Wireframe/UI Design</strong>
                                    <p>Upload your own design or wireframe</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="template-selection" class="form-group">
                        <label>Select UI Template</label>
                        <div class="template-visual-selector">
                            <div class="template-option selected" data-template="MasterDetailCRUDTemplate">
                                <div class="template-preview">
                                    <div class="template-mockup crud-mockup">
                                        <div class="mockup-header">üìù Form Header</div>
                                        <div class="mockup-body">
                                            <div class="mockup-row">
                                                <div class="mockup-field"></div>
                                                <div class="mockup-field"></div>
                                            </div>
                                            <div class="mockup-row">
                                                <div class="mockup-field"></div>
                                                <div class="mockup-field"></div>
                                            </div>
                                        </div>
                                        <div class="mockup-footer">
                                            <div class="mockup-btn save">Save</div>
                                            <div class="mockup-btn close">Close</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="template-info">
                                    <h4>Master-Detail CRUD</h4>
                                    <p>Two-column forms, CRUD operations (65% usage)</p>
                                </div>
                            </div>

                            <div class="template-option" data-template="SearchListGridTemplate">
                                <div class="template-preview">
                                    <div class="template-mockup grid-mockup">
                                        <div class="mockup-search">üîç Search</div>
                                        <div class="mockup-grid">
                                            <div class="grid-header">Name | Type | Date | Actions</div>
                                            <div class="grid-row">Item 1 | Type A | 2024 | ‚ö°</div>
                                            <div class="grid-row">Item 2 | Type B | 2024 | ‚ö°</div>
                                            <div class="grid-row">Item 3 | Type C | 2024 | ‚ö°</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="template-info">
                                    <h4>Search/List Grid</h4>
                                    <p>Search, filters, data grids (20% usage)</p>
                                </div>
                            </div>

                            <div class="template-option" data-template="WorkflowFormTemplate">
                                <div class="template-preview">
                                    <div class="template-mockup workflow-mockup">
                                        <div class="mockup-accordion">
                                            <div class="accordion-item">‚ñº Section 1</div>
                                            <div class="accordion-item">‚ñ∂ Section 2</div>
                                            <div class="accordion-item">‚ñ∂ Section 3</div>
                                        </div>
                                        <div class="mockup-files">üìé Attachments</div>
                                        <div class="mockup-timeline">üìÖ Timeline</div>
                                        <div class="mockup-footer">
                                            <div class="mockup-btn approve">Approve</div>
                                            <div class="mockup-btn reject">Reject</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="template-info">
                                    <h4>Workflow Form</h4>
                                    <p>Approvals, attachments, timeline (10% usage)</p>
                                </div>
                            </div>

                            <div class="template-option" data-template="ReportParameterTemplate">
                                <div class="template-preview">
                                    <div class="template-mockup report-mockup">
                                        <div class="mockup-params">
                                            <div class="param-row">üìÖ Date Range</div>
                                            <div class="param-row">üìä Categories</div>
                                            <div class="param-row">üè¢ Sites</div>
                                        </div>
                                        <div class="mockup-footer">
                                            <div class="mockup-btn generate">Generate</div>
                                            <div class="mockup-btn schedule">Schedule</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="template-info">
                                    <h4>Report Parameters</h4>
                                    <p>Report generation, scheduling (5% usage)</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="wireframe-upload" class="form-group" style="display: none;">
                        <label>Upload Wireframe/UI Design</label>
                        <div class="file-upload-area" id="wireframe-drop-zone">
                            <div class="upload-content">
                                <div class="upload-icon">üìé</div>
                                <p><strong>Drag & drop</strong> your wireframe or UI design here</p>
                                <p>Or <span class="upload-link" onclick="document.getElementById('wireframe-file').click()">browse files</span></p>
                                <div class="upload-formats">Supports: PNG, JPG, PDF, Figma links</div>
                            </div>
                            <input type="file" id="wireframe-file" accept="image/*,.pdf" style="display: none;">
                        </div>
                        <div id="wireframe-preview" style="display: none;">
                            <div class="wireframe-display">
                                <img id="wireframe-image" style="max-width: 100%; border-radius: 8px; border: 1px solid #3c4043;">
                                <div class="wireframe-actions">
                                    <button type="button" onclick="removeWireframe()" class="btn-remove">Remove</button>
                                </div>
                            </div>
                        </div>
                        <div class="form-group">
                            <label>Design Description</label>
                            <textarea id="wireframe-description" placeholder="Describe your UI design, key features, layout requirements, etc."></textarea>
                            <div class="hint">Help Claude understand your design intent and requirements</div>
                        </div>
                    </div>
                    <div class="form-group" id="api-base-route-group">
                        <label>API Base Route</label>
                        <input type="text" id="api-base-route" placeholder="e.g., /api/usermanagement">
                        <div class="hint">Base route for API endpoints (auto-generated if empty)</div>
                    </div>
                </div>
            </div>

            <!-- Step 3: Entity & Fields -->
            <div class="step-content" id="step-3">
                <h1>Entity Definition</h1>
                <p class="step-description">Define the main entity and its properties for this module.</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 60%"></div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">Entity Information</div>
                    <div class="form-group">
                        <label>Entity Name <span class="required">*</span></label>
                        <input type="text" id="entity-name" placeholder="e.g., User, Product, Order">
                        <div class="hint">Singular name for your main entity. The backend will automatically generate the appropriate database table name.</div>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">Entity Fields</div>
                    <div class="form-group">
                        <label>Add Field</label>
                        <div style="display: flex; gap: 10px; margin-bottom: 10px;">
                            <input type="text" id="field-name" placeholder="Field name" style="flex: 1;">
                            <select id="field-type" style="flex: 1;">
                                <option value="string">String</option>
                                <option value="int">Integer</option>
                                <option value="short">Short</option>
                                <option value="decimal">Decimal</option>
                                <option value="DateTime">DateTime</option>
                                <option value="bool">Boolean</option>
                            </select>
                            <button type="button" onclick="addField()" class="btn-primary">Add</button>
                        </div>
                    </div>
                    <div class="field-list" id="field-list">
                        <div style="color: #9aa0a6; text-align: center;">No fields added yet. Add some fields above.</div>
                    </div>
                </div>

                <div class="form-section" id="field-mapping-section" style="display: none;">
                    <div class="form-section-title">Data Source Mapping</div>
                    <div class="hint" style="margin-bottom: 16px; padding: 12px; background: #303134; border-radius: 8px; border-left: 4px solid #8ab4f8;">
                        Configure how fields connect to database tables for dropdowns, lookups, and display values.
                    </div>
                    <div id="field-mappings">
                        <!-- Dynamically populated field mappings will go here -->
                    </div>
                </div>

                <div class="form-section" id="relationships-section" style="display: none;">
                    <div class="form-section-title">Table Relationships</div>
                    <div class="hint" style="margin-bottom: 16px; padding: 12px; background: #303134; border-radius: 8px; border-left: 4px solid #fbbf24;">
                        Define relationships between tables for data joins and lookups.
                    </div>
                    <div class="form-group">
                        <label>Add Relationship</label>
                        <div style="display: grid; grid-template-columns: 1fr 1fr 1fr auto; gap: 10px; margin-bottom: 10px;">
                            <input type="text" id="rel-from-table" placeholder="From table (e.g., order)">
                            <input type="text" id="rel-from-field" placeholder="From field (e.g., customer_id)">
                            <input type="text" id="rel-to-table" placeholder="To table (e.g., customer)">
                            <button type="button" onclick="addRelationship()" class="btn-primary">Add</button>
                        </div>
                    </div>
                    <div id="relationships-list" style="background: #292a2d; border: 1px solid #3c4043; border-radius: 8px; min-height: 60px; padding: 16px;">
                        <div style="color: #9aa0a6; text-align: center;">No relationships defined yet.</div>
                    </div>
                </div>
            </div>

            <!-- Step 4: API Configuration -->
            <div class="step-content" id="step-4">
                <h1>API Configuration</h1>
                <p class="step-description">The backend will automatically generate standard CRUD operations for your module.</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 80%"></div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">Standard API Endpoints</div>
                    <div style="background: #303134; padding: 20px; border-radius: 8px; border-left: 4px solid #8ab4f8;">
                        <p style="color: #8ab4f8; font-weight: 500; margin-bottom: 16px;">‚ú® The following endpoints will be automatically generated:</p>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 12px; color: #e8eaed;">
                            <div>‚úÖ <strong>Create</strong> - Add new records</div>
                            <div>‚úÖ <strong>Read</strong> - Get all records</div>
                            <div>‚úÖ <strong>Update</strong> - Modify existing records</div>
                            <div>‚úÖ <strong>Delete</strong> - Remove records</div>
                            <div>‚úÖ <strong>Search</strong> - Filter and find records</div>
                            <div>‚úÖ <strong>GetById</strong> - Retrieve single record</div>
                            <div>‚úÖ <strong>Export</strong> - Download data</div>
                            <div>‚úÖ <strong>Import</strong> - Upload data</div>
                        </div>
                        <p style="color: #9aa0a6; margin-top: 16px; font-size: 14px;">
                            These standard operations cover 95% of typical use cases. The backend service will handle all the implementation details.
                        </p>
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">Additional Notes</div>
                    <div class="form-group">
                        <label>Special Requirements (Optional)</label>
                        <textarea id="api-notes" placeholder="Any special API requirements or custom endpoints needed? (Most modules won't need this)" style="height: 100px;"></textarea>
                        <div class="hint">Leave empty for standard CRUD operations. Only fill if you need custom business logic.</div>
                    </div>
                </div>
            </div>

            <!-- Step 5: Generate -->
            <div class="step-content" id="step-5">
                <h1>Generate Module</h1>
                <p class="step-description">Review your configuration and generate the module files.</p>
                
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%"></div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">Module Summary</div>
                    <div id="module-summary">
                        <!-- Dynamically populated -->
                    </div>
                </div>

                <div class="form-section">
                    <div class="form-section-title">Generated Instructions Preview</div>
                    <div class="code-preview" id="instructions-preview">
                        # Generated instructions will appear here...
                    </div>
                </div>
                
                <div class="form-section">
                    <div class="form-section-title">Download Instructions</div>
                    <div style="text-align: center; padding: 20px;">
                        <p style="color: #e8eaed; margin-bottom: 20px;">Click the button below to download the module generation instructions as a Markdown file.</p>
                        <button class="btn-success" onclick="generateModule()" style="padding: 12px 32px; font-size: 16px;">
                            <span class="material-icons" style="vertical-align: middle; margin-right: 8px;">download</span>
                            Download Module Instructions
                        </button>
                        <p style="color: #9aa0a6; margin-top: 16px; font-size: 14px;">Give this file to Claude Code to create your module automatically.</p>
                    </div>
                </div>
            </div>

            <!-- Navigation buttons -->
            <div class="button-group">
                <div>
                    <button class="btn-secondary" onclick="previousStep()" id="prev-btn" style="display: none;">Previous</button>
                </div>
                <div>
                    <button class="btn-primary" onclick="nextStep()" id="next-btn">Next</button>
                    <button class="btn-primary" onclick="previousStep()" id="generate-btn" style="display: none;">Back to Summary</button>
                </div>
            </div>
        </div>
    </div>

    <script src="js/module-generator.js"></script>
</body>
</html>